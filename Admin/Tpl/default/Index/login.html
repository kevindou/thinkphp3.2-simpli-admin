<include file="Layout:header" />
<div class="container-fluid-full">
    <div class="row-fluid">
        <div class="login-box">
            <h2>登录</h2>
            <form class="form-horizontal" action="{:U('index/login')}" method="post" id="login">
                <fieldset>
                    <input class="input-large span12" name="username" id="username" required="true" rangelength="[2,20]" type="text" placeholder="登录账号" />
                    <input class="input-large span12" name="password" id="password" required="true" rangelength="[6,15]" type="password" placeholder="登录密码" />
                    <div class="clearfix"></div>
                    <button type="submit" class="btn btn-primary span12">登录</button>
                    <label  class="m_error" style="display:none">页面没有响应</label>
                </fieldset>
            </form>
        </div>
    </div>
</div>
</body>
</html>
<script type="text/javascript">
    $(window).ready(function(){
        // 表单提交
        $('#login').submit(function(){
            if ($(this).validate().form())
            {
               // ajax提交
                $.ajax({
                    url:'?m=Index&a=login',
                    data:$(this).serialize(),
                    type:'post',
                    dataType:'json',
                    success:function(json)
                    {
                        $('.m_error').html(json.msg).show();
                        if (json.status == 1) window.location.href = '?m=Index&a=index';
                    },
                })
            }

            return false;
        });
    });

</script>