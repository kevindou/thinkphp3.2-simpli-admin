<include file="Layout:header" />
<div class="container-fluid-full">
		<div class="row-fluid">
			<div class="row-fluid">
				<div class="login-box">
					<h2>登录</h2>
					<form class="form-horizontal" action="{:U('index/login')}" method="post" id="login">
						<fieldset>
							<input class="input-large span12" name="username" required="1" rangelength="[2,10]" type="text" placeholder="登录账号" />
							<input class="input-large span12" name="password" required="1" rangelength="[6,12]" type="password" placeholder="登录密码" />
							<div class="clearfix"></div>
							<button type="submit" class="btn btn-primary span12">登录</button>
						</fieldset>
					</form>
				</div>
			</div>
        </div>
	    </div>
</body>
</html>
<script type="text/javascript">
    $(window).ready(function(){
        // 表单提交
        $('#login').submit(function(){
            if ($(this).validate().form())
            {
                var intLoad = layer.load();
               // ajax提交
                $.ajax({
                    url:'?m=Index&a=login',
                    data:$('#login').serialize(),
                    type:'post',
                    dataType:'json',
                    success:function(json)
                    {
                        layer.close(intLoad);
                        var color = json.status == 1 ? "#78BA32" : "";
                        layer.tips(json.msg, ".btn-primary", {tips: [3, color], time:1000})
                        if (json.status == 1) window.location.href = "?m=Index&a=index";
                    },
                    error:function(){
                        layer.close(intLoad);
                        layer.msg("服务器繁忙，请稍候再试...", {time:800})
                    }
                })
            }

            return false;
        });
    });

</script>