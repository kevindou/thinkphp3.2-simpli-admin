<include file="Layout:indexHeader" />
<div class="row-fluid">
    <div class="box span12">
        <!--前面导航信息-->
        <div class="box-header" data-original-title="">
            <h2>
                <i class="icon-desktop"></i>
                <span class="break"></span>
            </h2>
            <div class="box-icon">
                <a title="添加" href="javascript:myTable.insert()">
                    <i class="icon-plus"></i>
                </a>
                <a id="table-refresh" title="刷新" href="#" onclick="return myTable.search();">
                    <i class="icon-refresh"></i>
                </a>
                <a id="toggle-fullscreen" class="hidden-phone hidden-tablet" title="全屏" href="#">
                    <i class="icon-fullscreen"></i>
                </a>
                <a class="btn-minimize" title="隐藏" href="#">
                    <i class="icon-chevron-up"></i>
                </a>
                <a class="btn-close" title="删除" href="#">
                    <i class="icon-remove"></i>
                </a>
            </div>
        </div>
        <div class="box-content">
            <!--表格数据-->
            <table class="table table-striped table-bordered table-hover" id="showTable">
            </table>
        </div>
    </div>
</div>
<include file="Layout:indexFooter" />
<script type="text/javascript">
    var myTable = new MeTable({
        tableId:"showTable",
        baseUrl:"?m=Account&a=index",
    },{
        "sAjaxSource":"?m=account&a=getAll",
        "aoColumns":[
            {"data":"id", "title":"标识ID", "sName":"id", "edit":{"type":"hidden"}, "search":{"type":"text"}},
            {"data":"user_id", "sName":"user_id","title":"用户ID", "edit":{"options":{"required":1, "rangelength":"[2, 15]"}}},
            {"data":"account", "sName":"account", "title":"积分","edit":{"type":"password","options":{"rangelength":"[6, 20]"}}},
            {"data":"order_id", "sName":"order_id", "title":"订单ID","edit":{"type":"password","options":{"rangelength":"[6, 20]", "equalTo":"input[name=password]:first"}}, "defaultContent":""},
            {"data":"desc", "sName":"desc","title":"描述", "edit":{"type":"text", "options":{"required":1, "rangelength":"[2, 50]", "email":1}}, "search":{"type":"text"}},
            {"data":"create_time", "sName":"create_time","title":"创建时间", "createdCell":dateTimeString, "edit":{"type":"hidden"}},
            {"data": null, "title":"操作", "bSortable":false, "createdCell":setOperate}
        ],

//        "columnDefs":[{"targets":[2,3], "visible":false}],
    });

    $(function(){
        // 定义标题
        var title = $("li.active a").text(),icons = $("li.active a i").attr("class");
        $("div.box-header h2").append(title).find("i").attr("class", icons);

        // 隐藏内容
        $('.btn-close:first').click(function () {
            $('.main-menu li.active a').append('<span class="label">显示</span>').addClass('isShow').bind('click', function (e) {
                e.preventDefault();
                $('.row-fluid .box:first').fadeIn();
                $('.box:gt(0)').fadeOut();
                $(this).unbind('click').find('span:last').remove();
                return false;
            });
        });

        // 表单初始化
        myTable.init();
    })
</script>