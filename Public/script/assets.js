
var xd=function(){function z(){var a=c=jQuery;a.fn.enter=function(b){a.isFunction(b)&&this.keypress(function(a){13==a.keyCode&&b(a)});return this};a.ajaxSetup({cache:!1})}function m(a,b){return{valid:a,msg:b}}function za(a){"string"==typeof a&&(a=a.toUpperCase());var b=[],b=a.split("");if(null=={11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",
34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"}[parseInt(a.substr(0,2))])return!1;switch(a.length){case 15:if("111111111111111"==
a)return!1;ereg=0==(parseInt(a.substr(6,2))+1900)%4||0==(parseInt(a.substr(6,2))+1900)%100&&0==(parseInt(a.substr(6,2))+1900)%4?/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}$/:/^[1-9][0-9]{5}[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}$/;return ereg.test(a)?!0:!1;case 18:return ereg=0==parseInt(a.substr(6,4))%4||0==parseInt(a.substr(6,
4))%100&&0==parseInt(a.substr(6,4))%4?/^[0-9]{6}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9X]$/:/^[0-9]{6}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9X]$/,ereg.test(a)?(a=7*(parseInt(b[0])+parseInt(b[10]))+9*(parseInt(b[1])+parseInt(b[11]))+10*(parseInt(b[2])+parseInt(b[12]))+5*(parseInt(b[3])+parseInt(b[13]))+8*(parseInt(b[4])+
parseInt(b[14]))+4*(parseInt(b[5])+parseInt(b[15]))+2*(parseInt(b[6])+parseInt(b[16]))+1*parseInt(b[7])+6*parseInt(b[8])+3*parseInt(b[9]),a="10X98765432".substr(a%11,1),a==b[17]?!0:!1):!1;default:return!1}}function T(){var a=ja("source");a||(a=U("xd_source"));a&&t("xd_source",a,365,"/",".xd.com");return a}function ka(a){l=null;o({url:k+"/users/logoutService",dataType:"jsonp",success:function(){c.isFunction(a)&&a(l)}},!0)}function la(a,b){a=c.trim(a);if(c.isFunction(b)){var d=!1,e="2-20\u4e2a\u4e2d\u82f1\u6587\u6570\u5b57";
j.username!=a?(j.username=a,2>a.length?(j.username_valid=d=!1,j.username_msg=e="\u7528\u6237\u540d\u592a\u77ed\uff0c\u81f3\u5c112\u4f4d",b(m(d,e))):20<a.length?(j.username_valid=d=!1,j.username_msg=e="\u7528\u6237\u540d\u592a\u957f\uff0c\u6700\u591a20\u4f4d",b(m(d,e))):a.match(/^[\w_\u3300-\u9fff\uf900-\ufaff]{2,20}$/)?o({url:k+"/users/check_username",data:{username:a},dataType:"jsonp",success:function(a){switch(a.toString()){case "1":d=!0;e="\u7528\u6237\u540d\u53ef\u7528";break;case "-1":d=!1;e=
"2-20\u4e2a\u4e2d\u82f1\u6587\u6570\u5b57";break;case "-2":d=!1;e="\u5305\u542b\u654f\u611f\u5b57\u7b26";break;case "-3":d=!1,e="\u7528\u6237\u540d\u5df2\u88ab\u6ce8\u518c"}j.username_valid=d;j.username_msg=e;b(m(d,e))}}):(j.username_valid=d=!1,j.username_msg=e="\u5305\u542b\u975e\u6cd5\u5b57\u7b26\u8bf7\u91cd\u65b0\u8f93\u5165",b(m(d,e)))):b(m(j.username_valid,j.username_msg))}}function ma(a){a=c.trim(a);if(6>a.length)return j.password=a,m(!1,"\u81f3\u5c116\u4f4d\u5b57\u7b26(\u5b57\u6bcd,\u6570\u5b57,\u7b26\u53f7)");
j.password=a;return m(!0,"\u5bc6\u7801\u53ef\u7528")}function na(a){a=c.trim(a);return null==j.password||""==j.password?m(!1,"\u8bf7\u522b\u5fd8\u8bb0\u4e0a\u9762\u7684\u5bc6\u7801"):a!=j.password?m(!1,"\u4e24\u6b21\u5bc6\u7801\u4e0d\u4e00\u81f4"):m(!0,"\u5bc6\u7801\u4e00\u81f4")}function oa(a,b){a=c.trim(a);if(c.isFunction(b)){var d=!1,e="\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7535\u5b50\u90ae\u7bb1";6<a.length&&a.match(/^[A-Z0-9._%+\-]*[A-Z0-9]@(?:[A-Z0-9\-]+\.)+[A-Z]{2,4}$/i)&&(d=!0,e="\u90ae\u7bb1\u53ef\u7528");
b(m(d,e))}}function pa(a){a=c.trim(a);a=/^[\u3300-\u9fff\uf900-\ufaff]{2,}$/.test(a)?!0:!1;return a?m(!0,"\u771f\u5b9e\u59d3\u540d"):m(!1,"\u8bf7\u8f93\u5165\u771f\u5b9e\u59d3\u540d")}function qa(a){a=c.trim(a);return za(a)?m(!0,"\u6709\u6548\u8eab\u4efd\u8bc1"):m(!1,"\u8bf7\u8f93\u516515\u621618\u4f4d\u6709\u6548\u8eab\u4efd\u8bc1")}function U(a){for(var a=a+"=",b=document.cookie.split(";"),d=0;d<b.length;d++){for(var c=b[d];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(a))return decodeURIComponent(c.substring(a.length,
c.length))}return null}function t(a,b,d,c,g){if(a){var h="";d&&(h=new Date,h.setTime(h.getTime()+864E5*d),h="; expires="+h.toGMTString());document.cookie=a+"="+encodeURIComponent(b)+h+(";path="+(c||"/"))+(g?";domain="+g:"")}}function C(a,b,d){t(a,"",-100,b,d)}function ja(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function u(a,b,d,e,g){document.domain="xd.com";window.open(a,
d||"open_window","width="+(e||500)+",height="+(g||350)+",menubar=0,scrollbars=1, resizable=1,status=1,titlebar=0,toolbar=0,location=0");window.child_close_handler=function(a,d){"1"==d?P(Aa):P(Ba);a&&t("xd[user]",a,30,"/",".xd.com");c.isFunction(b)&&b()}}function ga(a){c.isFunction(a)||(a=function(){window.location.reload()});u(k+"/oauth/qq_login",a,"TencentLogin",694,600);return!1}function ha(a){c.isFunction(a)||(a=function(){window.location.reload()});u(k+"/oauth/verycd_login",a,"VerycdLogin",550,
450);return!1}function V(a,b,d){Q||(Q=!0,xd.getUser(function(e){0<e.id&&(c.isFunction(a)?a(e):b?window.location=b:d?window.location=xd.getPlayUrl(d):document.referrer&&(window.location=document.referrer));Q=!1},d))}function P(a){a&&"undefined"!=typeof _gaq&&_gaq.push(["_trackPageview",a])}function ra(a,b){var d=null,c="pendding",g=a.url.split("/"),h="/",O=a.success,D=a.error,f=function(){"success"!=c&&(c="try again",a.url=k+h,o(a,b),d=null)},h=0===g[0].indexOf("http")?h+g.slice(3).join("/"):a.url;
a.url=q+h;a.success=function(a,b,f){d&&(clearTimeout(d),d=null);if("success"!=c)c="success";else return!1;"function"==typeof O&&O(a,b,f)};a.error=function(a,b,c){d?(clearTimeout(d),d=null,f()):"function"==typeof D&&D(a,b,c)};d=setTimeout(f,5E3);"undefined"==typeof a.data&&(a.data={});a.data.rqst_sgntr=Math.random();o(a,b)}function o(a,b){var d=a.url;if(!1===n||!0===b||d.match(/(?:https?:)?\/\//i)&&!d.match(/(?:https?:)?\/\/[\w\d._-]*www\.xd\.com(.*)/))return c.ajax(a);n.push(a);!1!==s&&clearTimeout(s);
s=setTimeout(function(){R()},500)}function R(a){if(n.length){if(1==n.length)return c.ajax(n.pop());var b=n,d={data:{}};for(i in b){var e=b[i],g=e.url,h=0,h=!1;(h=g.match(/(?:https?:)?\/\/[\w\d._-]*www\.xd\.com(.*)/))&&(g=h[1]);d.data[g]||(d.data[g]=[]);e.data?d.data[g].push(e.data):d.data[g].push({noparam:!0});delete e.url;delete e.data;h=d.data[g].length-1;for(i in e)d[i]||(d[i]={}),d[i][g]||(d[i][g]=[]),d[i][g][h]=e[i]}!0===a?n=[]:(n=!1,clearTimeout(s),s=!1);c.ajax({url:k+"/remoteapi/getdata",dataType:"jsonp",
data:d.data,cache:!1,success:function(a){try{for(url in a)for(i in a[url])if(d.success[url]&&c.isFunction(d.success[url][i])){var b=a[url][i];if(typeof b=="string"){var e=b.match(/^[\w\d_]+\((.+)\);?$/);e&&(b=eval(e[1]))}d.success[url][i](b)}}catch(g){}},error:function(a){try{for(url in a)for(i in a[url])if(d.error[url]&&c.isFunction(d.error[url][i]))d.error[url][i](a[url][i])}catch(b){}}})}else n=!1}var k="http://www.xd.com",q="https://ssl.xd.com";0==window.location.host.indexOf("ssl.xd.com")?k=
q:0==window.location.host.indexOf("local.")?k=q="http://local.www.xd.com":0<window.location.host.indexOf("office.")?k=q="http://"+window.location.host.replace(/^.*\.office\./i,"www.office."):0==window.location.host.indexOf("api.xd.com")&&(k=q="https://api.xd.com");var l=null,W=[],w=!1,j={},Z=[],c;if("undefined"==typeof jQuery){var r="http://web.xdcdn.net/xd/vendor/js/jquery.js";0==window.location.host.indexOf("ssl.xd.com")&&(r="https://ssl.xd.com/vendor/js/jquery.js");var X=r,r=document.createElement("script");
r.type="text/javascript";r.async=!0;var ta=!1;r.onreadystatechange=function(){if(("loaded"==this.readyState||"complete"==this.readyState)&&!ta)ta=!0,z()};r.onload=z;r.src=X;X=document.getElementsByTagName("script")[0];X.parentNode.insertBefore(r,X)}else z();var ia=0,Y,Q=!1,Ca="/logs/join",Aa="/logs/join/qq",Ba="/logs/login/qq",n=[],s=null,s=setTimeout(function(){R()},500);T();return{getUser:function(a,b,d){c.isFunction(a)&&(l?a(l):("verycd"!=d&&(d=null),o({url:k+"/users/getuser",dataType:"jsonp",
data:{app:b,site:d},cache:!1,success:function(b){try{b&&0<b.id&&(l=b,l.returnVisitor&&P("/logs/login")),a(b)}catch(d){}}})))},login:function(a,b,d,e,g,h,O,D,f,m){if(c.isFunction(e)&&c.isFunction(g)){if(l){if(l.username==a){e(l);return}ka()}if(!w)if(a=c.trim(a),b=c.trim(b.substr(0,500)),a)if(b){"xd"!=O&&"verycd"!=O&&(O="xd");D=D||null;w=!0;var j=setTimeout(function(){w=!1;window.location.href=k+"/users/login?continue="+window.location.href},1E4);ra({url:"/users/loginService",dataType:"jsonp",data:{"data[User][username]":a,
"data[User][password]":b,"data[User][remember_me]":Boolean(d),"data[User][site]":O,app:h,captcha:D,captcha_identifier:m},cache:!1,success:function(a){w=!1;clearTimeout(j);if(a&&0<a.id)if(!0===a.twoauth){a=k+"/two_auth_login/index";if("/game/index.html"==window.location.pathname||"/game"==window.location.pathname)a=k+"/two_auth_login/small";-1!==c.inArray(window.location.pathname,["/jswd","/jswd/","/ktwd","/ktwd/","/game/"])?(a=k+"/two_auth_login/small?for="+window.location.pathname,"undefined"!=typeof f&&
(a+="&redirect="+f)):"undefined"!=typeof f&&(a+="?redirect="+f);window.location=a}else{"undefined"!=typeof _gaq&&_gaq.push(["_setCustomVar",2,"memberId",a.id,2]);P("/logs/login");l=a;try{e(l)}catch(b){}}else try{g(a)}catch(d){}},error:function(){g({msg:"500 Error"})}},!0)}else g({error:"\u5bc6\u7801\u4e3a\u7a7a"});else g({error:"\u7528\u6237\u540d\u4e3a\u7a7a"})}},logout:ka,getServers:function(a,b){a&&c.isFunction(b)&&(W[a]?b(W[a]):o({url:k+"/games/getservers/"+a,dataType:"jsonp",success:function(d){d&&
(W[a]=d);b(d)}}))},getPlayUrl:function(a,b){if(!a)return!1;var d=k+"/games/play?app="+a;b&&(d+="&server="+b);return d},checkUsername:la,checkPassword:ma,checkConfirm:na,checkEmail:oa,checkRealname:pa,checkRealid:qa,register:function(a,b,d,e,g,h,k,D,f){function j(c,o){function n(a){0>=a.user?a.error?f(m(!1,a.error)):f(m(!1,"\u6ce8\u518c\u5931\u8d25")):(P(Ca),r&&C("xd_source","/",".xd.com"),D(a))}if(sa)if(o.valid){l[c]=!0;for(i in l)if(!l[i])return;var v={username:a,password:b,confirm:d};e&&(v.email=
e);g&&(v.realname=g);h&&(v.realid=h);k&&(v.captcha=k);var r=T();r&&(v.source=r);ra({url:"/users/registerService",success:n,error:n,cache:!1,data:v,dataType:"jsonp"},!0)}else sa=!1,f(o)}a=c.trim(a);b=c.trim(b.substr(0,500));d=c.trim(d.substr(0,500));e=c.trim(e);g=c.trim(g);h=c.trim(h);k=c.trim(k);if(c.isFunction(D)&&c.isFunction(f)){var l={username:!1,password:!1,confirm:!1};e&&(l.email=!1);g&&(l.realname=!1);h&&(l.realid=!1);var sa=!0;la(a,function(a){j("username",a)});j("password",ma(b));j("confirm",
na(d));e&&oa(e,function(a){j("email",a)});g&&j("realname",pa(g));h&&j("realid",qa(h))}},getCookie:U,setCookie:t,deleteCookie:C,clearCookie:function(a,b){for(var d=[],c=document.cookie.split(";"),g=0;g<c.length;g++){for(var h=c[g];" "==h.charAt(0);)h=h.substring(1,h.indexOf("="));d.push(h)}for(g in d)C(d[g],a,b)},getSite:function(){value=U("uidsite");return"xd"==value||"verycd"==value?value:"xd"},setSite:function(a){"xd"!=a&&"verycd"!=a&&(a="xd");t("uidsite",a,3E3,"/",".xd.com")},bookmarkMe:function(a,
b){a=a||"//www.xd.com";b=b||"\u5fc3\u52a8\u6e38\u620f";window.sidebar?window.sidebar.addPanel(b,a,""):document.all?window.external.AddFavorite(a,b):alert("\u8bf7\u6309 Ctrl + D \u52a0\u5165\u6536\u85cf\u5939")},getParameterByName:ja,capitaliseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},setDomain:function(a){k=a},getPlayedHistory:function(a,b){a&&c.isFunction(b)&&(Z[a]?b(Z[a]):o({url:k+"/games/history/"+a,dataType:"jsonp",success:function(c){if(c){for(var e in c)c[e]=c[e].UserPlayHistory;
Z[a]=c}b(c)}}))},getCaptchaUrl:function(){U("xdsession")||(0<ia&&o({url:k+"/remoteapi/get_session",dataType:"jsonp",cache:!1,success:function(a){a&&t("xdsession",a,30,"/",".xd.com")}},!0),"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","captcha","show",ia+" times with no session"]),ia++);return k+"/security/captcha/"+Math.random()},qq_login:ga,qq_redirect:function(a){a||(a=window.location.href);window.location.href=k+"/oauth/qq_redirect?return="+a},weibo_login:function(a){c.isFunction(a)||(a=function(){window.location.reload()});
u(k+"/oauth/weibo_login",a,"WeiboLogin",585,422);return!1},verycd_login:ha,getdomain:function(){return k},getSslDomain:function(){return q},check_password_strongness:function(a){return!a?!1:-1<c.inArray(a,"000000 111111 11111111 112233 123123 123321 123456 12345678 654321 666666 888888 abcdef abcabc abc123 a1b2c3 aaa111 123qwe qwerty qweasd admin password p@ssword passwd iloveyou 5201314 123456 111111 123456789 123123 a636654 3727997 qqq111 a123456 13e4e5sd aa123456 100200 131313 5897037 2281538 5201314 123abc 196299 456852 wolf8637 qqqqqq js77777 a520520 qq111111 1qaz2wsx 11111111 lnb5552436 111333 qq123123 xiaohe 216612 zz123456 123456aa e10adc3949ba59abbe56 556656 az123456 anglang qq666666 q1w2e3r4 25991314 qq11111 zzzxxx 1989617 4782633 112233abc qqqaaa 830415 ningbo 336699 wishing qw5555 1234567 198723 123321 xiao801013 19790219 yuyang11 521326 1314520 abc123456 123456789k jiangji l138071 abu131060 484848 dircls128 yuzhiyuan1 a42176488 deng1234 wy1981813 555444 zz12369 uni0728 7758521 5501146 159357 800528sd tang520qin 123aa123 li222222 hb000000 5211314 456456 123550 123456a liulan860420 zxcvbnm tyu78ju sd123456 121212 666666 1985516 zeng1013 popo999 asdasd 7878456 147258 woaini".split(" "))?
1:a.match(/^\d+$/)||a.match(/^[a-z]+$/i)?4:a.match(/^[0-9a-z]+$/i)?2:3},getSource:T,getCity:function(a){Y?a(Y):o({url:k+"/users/getCity",dataType:"jsonp",success:function(b){Y=b;a(Y)}})},registerForm:function(a,b,d,e,g,h,k,j,f){function m(){xd.checkUsername(x.val(),function(a){p.username=a.valid;var b=a.msg;"undefined"!=typeof f[a.msg]&&(b=f[a.msg]);0<S.length?(x.val(),S.show().html(b),S.removeClass("infoOk infoError"),x.removeClass("inputOk inputError"),S.addClass(a.valid?"infoOk":"infoError"),x.addClass(a.valid?
"inputOk":"inputError")):alert(b);E()})}function l(){var a="2-20\u4e2a\u4e2d\u82f1\u6587\u5b57\u7b26\u3001\u6570\u5b57\u6216\u4e0b\u5212\u7ebf";"undefined"!=typeof f[a]&&(a=f[a]);S.removeClass("infoOk infoError");x.removeClass("inputOk inputError");S.html(a);S.show()}function o(){var a=xd.checkPassword(F.val());p.password=a.valid;var b=a.msg;if(p.password){var b=F.val(),c="psstWeak";if(b==x.val())b="\u5f3a\u5ea6\u5f31";else{var d=xd.check_password_strongness(b),b="\u5f3a\u5ea6\u5f31",c="psstWeak";
4==d&&(b="\u5f3a\u5ea6\u4f4e",c="psstLow");2==d?(b="\u5f3a\u5ea6\u4e2d",c="psstNormal"):3==d&&(b="\u5f3a\u5ea6\u9ad8",c="psstHigh")}}"undefined"!=typeof f[b]&&(b=f[b]);0<G.length?(0==F.val().length?G.show():G.html(b).show(),G.removeClass("infoOk infoError psstWeak psstNormal psstHigh"),F.removeClass("inputOk inputError psstWeak psstNormal psstHigh"),G.addClass(a.valid?"infoOk":"infoError"),F.addClass(a.valid?"inputOk":"inputError"),G.addClass(c)):alert(b);0<y.length&&0<y.val().length&&n();E()}function r(){var a=
"\u81f3\u5c116\u4f4d\u5b57\u7b26(\u5b57\u6bcd,\u6570\u5b57,\u7b26\u53f7)";"undefined"!=typeof f[a]&&(a=f[a]);G.removeClass("infoOk infoError psstWeak psstNormal psstHigh");F.removeClass("inputOk inputError psstWeak psstNormal psstHigh");G.html(a);G.show()}function n(){var a=xd.checkConfirm(y.val());p.confirm=a.valid;var b=a.msg;"undefined"!=typeof f[a.msg]&&(b=f[a.msg]);0<H.length?(0==y.val().length?H.show():H.html(b).show(),H.removeClass("infoOk infoError"),y.removeClass("inputOk inputError"),H.addClass(a.valid?
"infoOk":"infoError"),y.addClass(a.valid?"inputOk":"inputError")):alert(b);E()}function t(){var a="\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801\uff0c\u786e\u4fdd\u5bc6\u7801\u4e00\u81f4";"undefined"!=typeof f[a]&&(a=f[a]);H.removeClass("infoOk infoError");y.removeClass("inputOk inputError");H.html(a);H.show()}function v(){var a=xd.checkRealname(I.val());p.realname=a.valid;var b=a.msg;"undefined"!=typeof f[a.msg]&&(b=f[a.msg]);0<J.length?(0==I.val().length?J.show():J.html(b).show(),J.removeClass("infoOk infoError"),
I.removeClass("inputOk inputError"),J.addClass(a.valid?"infoOk":"infoError"),I.addClass(a.valid?"inputOk":"inputError")):alert(b);E()}function q(){var a="\u8bf7\u8f93\u5165\u771f\u5b9e\u59d3\u540d";"undefined"!=typeof f[a]&&(a=f[a]);J.removeClass("infoOk infoError");I.removeClass("inputOk inputError");J.html(a);J.show()}function s(){var a=xd.checkRealid(K.val());p.realid=a.valid;var b=a.msg;"undefined"!=typeof f[a.msg]&&(b=f[a.msg]);0<L.length?(0==K.val().length?L.show():L.html(b).show(),L.removeClass("infoOk infoError"),
K.removeClass("inputOk inputError"),L.addClass(a.valid?"infoOk":"infoError"),K.addClass(a.valid?"inputOk":"inputError")):alert(b);E()}function P(){var a="\u8bf7\u8f93\u5165\u6709\u6548\u8eab\u4efd\u8bc1\uff0c\u6ce8\u518c\u540e\u5c06\u65e0\u6cd5\u66f4\u6539";"undefined"!=typeof f[a]&&(a=f[a]);L.removeClass("infoOk infoError");K.removeClass("inputOk inputError");L.html(a);L.show()}function ua(){p.realname=!1;p.realid=!1;I.blur(v);K.blur(s);I.focus(q);K.focus(P);z.show();T.show();A.realname=v;A.realid=
s}function U(){z.hide();T.hide()}function va(){xd.checkEmail(M.val(),function(a){p.email=a.valid;var b=a.msg;"undefined"!=typeof f[a.msg]&&(b=f[a.msg]);0<N.length?(0==M.val().length?N.show():N.html(b).show(),N.removeClass("infoOk infoError"),M.removeClass("inputOk inputError"),N.addClass(a.valid?"infoOk":"infoError"),M.addClass(a.valid?"inputOk":"inputError")):alert(b);E()})}function Da(){var a="\u5e38\u7528\u7684\u90ae\u7bb1\uff0c\u65b9\u4fbf\u60a8\u627e\u56de\u5bc6\u7801";"undefined"!=typeof f[a]&&
(a=f[a]);N.removeClass("infoOk infoError");M.removeClass("inputOk inputError");N.html(a);N.show()}function wa(){p.email=!1;M.blur(va);M.focus(Da);A.email=va;C.show()}function Ea(){C.hide()}function xa(){p.agreement=Q.is(":checked");p.agreement?0<aa.length&&aa.hide():("undefined"!=typeof f["\u8bf7\u540c\u610f\u7528\u6237\u534f\u8bae"]&&(msg=f["\u8bf7\u540c\u610f\u7528\u6237\u534f\u8bae"]),0<aa.length?aa.html("\u8bf7\u540c\u610f\u7528\u6237\u534f\u8bae").addClass("infoError").show():alert("\u8bf7\u540c\u610f\u7528\u6237\u534f\u8bae"));
E()}function ya(){p.agreement=Q.is(":checked");Q.change(xa);u.show();A.agreement=xa}function Fa(){u.hide()}function w(){var a=c.trim(ba.val());p.captcha=0<a.length;p.captcha?0<ca.length&&ca.hide():(a="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801","undefined"!=typeof f[a]&&(a=f[a]),0<ca.length?ca.html(a).addClass("infoError").show():alert(a));E()}function E(b){"undefined"==typeof b&&(b=!1);var d=!0,e=!0,f;for(f in p)if(!p[f]){d=!1;if(!b)break;if(!c(a+" ."+f+"Info").hasClass("infoError")&&c.isFunction(A[f]))A[f]();
var g=a+" ."+f+"Input";e&&(e=!1,c(g).focus().addClass("inputError"))}return d}function X(){if(da||!E(!0))return!1;da=!0;$.trigger("isReging");xd.register(x.val(),F.val(),y.val(),M.val(),I.val(),K.val(),ba.val(),function(a){$.trigger("isRegOk");da=!1;c.isFunction(b)?b(a):d?window.location=d:e?window.location=xd.getPlayUrl(e):document.referrer&&(window.location=document.referrer)},function(a){$.trigger("isRegError");da=!1;var b=a.msg;"undefined"!=typeof f[b]&&(b=f[b]);"\u9a8c\u8bc1\u7801\u9519\u8bef"==
a.msg&&ea.is(":hidden")&&(p.captcha=!1,fa.attr("src",xd.getCaptchaUrl()),fa.click(function(){fa.attr("src",xd.getCaptchaUrl())}),ba.blur(w),ba.enter(function(){w()}),ea.show(),A.captcha=w,ea.trigger("isVisible"));ea.is(":visible")&&fa.click();0<R.length?(R.html(b).show(),R.addClass("infoError")):alert(b)});return!1}V(b,d,e);var $=c(a);if(0!=$.length){var j=c(a+" .usernameField"),x=c(a+" .usernameInput"),S=c(a+" .usernameInfo");if(0!=j.length){var j=c(a+" .passwordField"),F=c(a+" .passwordInput"),
G=c(a+" .passwordInfo");if(0!=j.length){var Y=c(a+" .confirmField"),y=c(a+" .confirmInput"),H=c(a+" .confirmInfo"),z=c(a+" .realnameField"),I=c(a+" .realnameInput"),J=c(a+" .realnameInfo"),T=c(a+" .realidField"),K=c(a+" .realidInput"),L=c(a+" .realidInfo"),C=c(a+" .emailField"),M=c(a+" .emailInput"),N=c(a+" .emailInfo"),u=c(a+" .agreementField"),Q=c(a+" .agreementInput"),aa=c(a+" .agreementInfo"),ea=c(a+" .captchaField"),ba=c(a+" .captchaInput"),fa=c(a+" .captchaImg"),ca=c(a+" .captchaInfo");c(a+
" .submitInput");var R=c(a+" .submitInfo"),j=c(a+" .qqField"),W=c(a+" .verycdField"),p={username:!1,password:!1},A={};f||(f={});x.blur(m);x.focus(l);A.username=m;F.blur(o);F.focus(r);A.password=o;0<Y.length&&(p.confirm=!1,y.blur(n),y.focus(t),y.enter(function(){n()}),A.confirm=n);var B=[];0<z.length&&(g?ua():B.push([ua,U]));0<C.length&&(h?wa():B.push([wa,Ea]));0<u.length&&(k?ya():B.push([ya,Fa]));if(0<B.length)if(g=window.location.search.match(/(\?|&)ads(=|$|&)/i)||window.location.search.match(/(\?|&)source=baidu_pinpai($|&)/i)?
!0:!1,g)for(var Z in B)B[Z][1]();else xd.getCity(function(a){a=a.substring(0,2);if(a=="\u4e0a\u6d77"||a=="\u5317\u4eac")for(var b in B)B[b][0]();else for(b in B)B[b][1]()});var da=!1;$.submit(X);x.is(":visible")&&x.focus();0<j.length&&j.click(function(){ga(function(){V(b,d,e)})});0<W.length&&W.click(function(){ha(function(){V(b,d,e)})})}}}},loginForm:function(a,b,d,e,g,h,j){function k(){s.is(":hidden")&&(t.click(k),s.show());t.attr("src",xd.getCaptchaUrl())}function f(a){"undefined"!=typeof h[a]&&
(a=h[a]);0<q.length?(q.html(a).addClass("infoError").show(),q.trigger("isInfoError")):alert(a);-1!==a.indexOf("\u5bc6\u7801")?o.val("").focus():-1!==a.indexOf("\u9a8c\u8bc1\u7801")?v.val("").focus():-1!==a.indexOf("\u7528\u6237\u540d")&&n.focus()}function m(){if(u)return!1;var a=n.val();if(!a)return f("\u8bf7\u8f93\u5165\u7528\u6237\u540d"),!1;var g=o.val();if(!g)return f("\u8bf7\u8f93\u5165\u5bc6\u7801"),!1;var h="",l="";if(s.is(":visible")){h=c.trim(v.val());if(0==h.length)return f("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801"),
!1;var q=t.attr("src");q&&(l=q.substr(q.lastIndexOf("/")+1))}q=r.is(":checked");u=!0;j||(j=window.location.href);xd.login(a,g,q,function(a){u=false;if(c.isFunction(b))b(a);else if(d)window.location=d;else if(e)window.location=xd.getPlayUrl(e);else if(document.referrer)window.location=document.referrer},function(a){u=false;a.needCaptcha&&k();f(a.error)},e,C,h,j,l);return!1}V(b,d,e);var l=c(a);if(0!=l.length){var n=c(a+" .usernameInput");if(0!=n.length){var o=c(a+" .passwordInput");if(0!=o.length){var r=
c(a+" .rememberInput"),s=c(a+" .captchaField"),v=c(a+" .captchaInput"),t=c(a+" .captchaImg");c(a+" .submitInput");var q=c(a+" .submitInfo"),w=c(a+" .qqField"),z=c(a+" .verycdField"),C=c(a+" .siteInput").val();h||(h={});0<s.length&&g&&k();var u=!1;l.submit(m);n.is(":visible")&&n.focus();0<w.length&&w.click(function(){ga(function(){V(b,d,e)})});0<z.length&&z.click(function(){ha(function(){V(b,d,e)})})}}}},validateDate:function(a){if(!a.match(/\d{8}/i))return!1;var b=a.substr(0,4),c=a.substr(4,2),a=
a.substr(6,2),e=new Date(b+"-"+c+"-"+a);return b==e.getFullYear()&&c==e.getMonth()+1&&a==e.getDate()?!0:!1},ajax:o,sendAjaxQueue:R}}();

for(var arr=[],arr=document.getElementById("tabList").getElementsByTagName("span"),i=0;i<arr.length;i++)arr[i].onclick=function(a){a=a?a:window.event;changeTab(a.target?a.target:a.srcElement)};
function changeTab(a){var b=a.getAttribute("uncheck");if("false"!=b&&"true"==b){for(b=0;b<arr.length;b++)"false"==arr[b].getAttribute("uncheck")&&(arr[b].setAttribute("uncheck","true"),document.getElementById(arr[b].getAttribute("data_target")).style.display="none",arr[b].className=arr[b].className.slice(0,-7));a.setAttribute("uncheck","false");a.className+="_active";document.getElementById(a.getAttribute("data_target")).style.display="block"}};
